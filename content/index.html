<!DOCTYPE html>
<html>
<head>
<script src="signaling.js"></script>
<script src="webrtc.js"></script>
<style>
video { background-color: #ccc; width: 360px; }
</style>
</head>
<body>
<h1>test</h1>
<video id="local_video" autoplay muted></video>
<video id="received_video" autoplay></video>

<script>
var RTC = new WebRtc().rtc; // RTCPeerConnection
navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(function(stream) {
  document.getElementById('local_video').srcObject = stream;
  for (var track of stream.getTracks()) RTC.addTrack(track, stream);
}).catch(function(e) { console.log('Error:', e.message); });
RTC.ontrack = function(x) {
  console.log('ON TRACK', x);
  document.getElementById('received_video').srcObject = x.streams[0];
};
</script>
</body>
</html>